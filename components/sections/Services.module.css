.sectionBackground {
  position: relative;
  overflow: hidden;
  background:
    repeating-linear-gradient(
      45deg,
      rgb(74 82 64 / 0.09) 0,
      rgb(74 82 64 / 0.09) 1px,
      rgb(74 82 64 / 0) 1px,
      rgb(74 82 64 / 0) 22px
    ),
    rgb(13 13 13);
}

/* Grain texture — lightweight CSS noise instead of expensive SVG feTurbulence */
.sectionBackground::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.12'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
  opacity: 0.5;
  /* Removed mix-blend-mode: overlay — expensive pixel-by-pixel compositing */
}


.sectionHeaderShell {
  position: relative;
  isolation: isolate;
  padding: 0 1rem 1rem;
}

.sectionHeaderShell::after {
  content: '';
  position: absolute;
  inset: -1.8rem -1.08rem -0.54rem;
  z-index: -1;
  border-radius: 0.9rem;
  pointer-events: none;
  background: linear-gradient(
    120deg,
    rgb(139 115 85 / 0.2) 0%,
    rgb(139 115 85 / 0.08) 50%,
    rgb(139 115 85 / 0.2) 100%
  );
  filter: blur(35px);
}

.sectionTitle {
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.sectionTitleAccent {
  margin-top: 0.95rem;
  display: block;
  height: 2px;
  width: clamp(8rem, 18vw, 13rem);
  background:
    linear-gradient(90deg, rgb(139 115 85 / 0.2) 0%, rgb(139 115 85 / 0.95) 50%, rgb(139 115 85 / 0.2) 100%);
  box-shadow:
    0 0 0 1px rgb(139 115 85 / 0.25),
    0 8px 20px rgb(139 115 85 / 0.2);
}

.sectionIntro {
  max-width: 62ch;
}

.rowDivider {
  display: none;
}


.serviceCard {
  position: relative;
  overflow: hidden;
  isolation: isolate;
  min-height: 14rem;
  background:
    radial-gradient(120% 80% at 100% 0%, rgb(139 115 85 / 0.16), transparent 60%),
    linear-gradient(160deg, rgb(26 26 26 / 0.96) 0%, rgb(18 18 18 / 0.98) 100%);
  border: 1px solid rgb(139 115 85 / 0.32);
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.04),
    0 16px 34px rgb(0 0 0 / 0.26);
  transition:
    transform 460ms cubic-bezier(0.19, 1, 0.22, 1),
    border-color 340ms cubic-bezier(0.22, 1, 0.36, 1);
  /* Removed box-shadow and filter transitions — cause layout recalculations during scroll */
  will-change: transform;
}

.serviceCard::before {
  content: '';
  position: absolute;
  inset: 0;
  z-index: 0;
  background:
    radial-gradient(circle at 85% 12%, rgb(139 115 85 / 0.14) 0%, transparent 46%),
    linear-gradient(120deg, transparent 12%, rgb(139 115 85 / 0.08) 50%, transparent 88%);
  opacity: 0.7;
  transform: none;
  transition: opacity 320ms ease;
  /* Removed filter transition — triggers repaint */
}

.serviceCard::after {
  content: '';
  position: absolute;
  inset: 0;
  z-index: 0;
  border: 1px solid transparent;
  border-image: linear-gradient(135deg, rgb(139 115 85 / 0.45), transparent 45%, rgb(139 115 85 / 0.22)) 1;
  pointer-events: none;
}

.serviceCard:hover {
  transform: translateY(-6px) scale(1.01);
  border-color: rgb(139 115 85 / 0.7);
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.08),
    0 24px 45px rgb(0 0 0 / 0.42);
}

.serviceCard:hover::before {
  opacity: 1;
}

.serviceCardMilitary {
  /* Removed backdrop-filter: blur — expensive GPU compositing during scroll */
  background:
    radial-gradient(130% 90% at 12% -8%, rgb(156 165 128 / 0.25), transparent 55%),
    radial-gradient(120% 80% at 100% 100%, rgb(139 115 85 / 0.2), transparent 60%),
    linear-gradient(145deg, rgb(78 84 63 / 0.22) 0%, transparent 40%),
    repeating-linear-gradient(
      125deg,
      rgb(38 41 33 / 0.28) 0,
      rgb(38 41 33 / 0.28) 10px,
      rgb(28 31 24 / 0.34) 10px,
      rgb(28 31 24 / 0.34) 20px
    ),
    linear-gradient(160deg, rgb(20 22 18 / 0.97) 0%, rgb(15 17 13 / 0.98) 100%);
  border-color: rgb(146 154 117 / 0.62);
  box-shadow:
    inset 0 1px 0 rgb(218 208 183 / 0.12),
    0 18px 38px rgb(0 0 0 / 0.35);
}

.serviceCardMilitary::before {
  background:
    linear-gradient(120deg, transparent 10%, rgb(179 164 130 / 0.14) 50%, transparent 90%),
    radial-gradient(circle at 86% 12%, rgb(111 121 85 / 0.32) 0%, transparent 44%);
}

.serviceCardMilitary::after {
  border-image: linear-gradient(130deg, rgb(177 186 146 / 0.46), transparent 48%, rgb(139 115 85 / 0.36)) 1;
}

.serviceCardMilitary:hover {
  border-color: rgb(177 186 146 / 0.82);
  box-shadow:
    inset 0 1px 0 rgb(231 222 200 / 0.22),
    0 24px 48px rgb(0 0 0 / 0.42);
}

.serviceCardHighlight {
  /* Removed backdrop-filter: blur — expensive GPU compositing during scroll */
  background:
    radial-gradient(130% 90% at 12% -8%, rgb(180 120 80 / 0.22), transparent 55%),
    radial-gradient(120% 80% at 100% 100%, rgb(139 115 85 / 0.18), transparent 60%),
    linear-gradient(145deg, rgb(80 55 35 / 0.18) 0%, transparent 40%),
    repeating-linear-gradient(
      125deg,
      rgb(38 28 18 / 0.28) 0,
      rgb(38 28 18 / 0.28) 10px,
      rgb(28 20 12 / 0.34) 10px,
      rgb(28 20 12 / 0.34) 20px
    ),
    linear-gradient(160deg, rgb(28 20 16 / 0.97) 0%, rgb(22 15 11 / 0.98) 100%);
  border-color: rgb(180 130 90 / 0.52);
  box-shadow:
    inset 0 1px 0 rgb(220 190 160 / 0.10),
    0 18px 38px rgb(0 0 0 / 0.38);
}

.serviceCardHighlight::before {
  background:
    linear-gradient(120deg, transparent 10%, rgb(180 140 100 / 0.12) 50%, transparent 90%),
    radial-gradient(circle at 86% 12%, rgb(160 120 80 / 0.28) 0%, transparent 44%);
  opacity: 0.7;
  transition: opacity 320ms ease;
}

.serviceCardHighlight::after {
  border-image: linear-gradient(135deg, rgb(200 155 105 / 0.50), transparent 48%, rgb(139 115 85 / 0.32)) 1;
}

.serviceCardHighlight:hover {
  border-color: rgb(200 155 110 / 0.78);
  box-shadow:
    inset 0 1px 0 rgb(230 200 170 / 0.18),
    0 24px 48px rgb(0 0 0 / 0.46);
}

.serviceCardHighlight:hover::before {
  opacity: 1;
}

.cardTopLine {
  height: 2px;
  width: 100%;
  background: linear-gradient(90deg, rgb(139 115 85 / 0.95), rgb(74 82 64 / 0.8), rgb(139 115 85 / 0.15));
  transform-origin: left center;
  opacity: 0.88;
  transform: scaleX(0.72) translateX(0);
  transition:
    transform 460ms cubic-bezier(0.22, 1, 0.36, 1),
    opacity 320ms ease;
}

.serviceCard:hover .cardTopLine {
  opacity: 1;
  transform: scaleX(1) translateX(0);
}

.cardTopLineHighlight {
  background: linear-gradient(90deg, rgb(180 130 85 / 0.95), rgb(210 165 110 / 0.88), rgb(139 115 85 / 0.30));
  opacity: 0.88;
}

.serviceCardHighlight:hover .cardTopLineHighlight {
  opacity: 1;
  transform: scaleX(1) translateX(0);
}

.cardTopLineMilitary {
  background: linear-gradient(90deg, rgb(151 159 121 / 0.9), rgb(139 115 85 / 0.78), rgb(73 81 57 / 0.32));
}

.iconBadge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 2.2rem;
  width: 2.2rem;
  border: 1px solid rgb(139 115 85 / 0.5);
  border-radius: 2px;
  background: linear-gradient(180deg, rgb(139 115 85 / 0.2), rgb(74 82 64 / 0.14));
  box-shadow: inset 0 1px 0 rgb(255 255 255 / 0.08);
  margin-inline: auto;
  transition:
    transform 360ms cubic-bezier(0.22, 1, 0.36, 1),
    border-color 320ms ease,
    box-shadow 360ms ease,
    background 360ms ease;
}

.iconBadgeHighlight {
  border-color: rgb(175 135 90 / 0.60);
  background: linear-gradient(180deg, rgb(160 115 70 / 0.28), rgb(80 55 35 / 0.48));
  box-shadow:
    inset 0 1px 0 rgb(230 190 155 / 0.20),
    0 5px 16px rgb(0 0 0 / 0.32);
}

.serviceCardHighlight:hover .iconBadgeHighlight {
  transform: scale(1.05);
  border-color: rgb(195 155 105 / 0.75);
  box-shadow:
    inset 0 1px 0 rgb(240 200 165 / 0.25),
    0 10px 20px rgb(0 0 0 / 0.38);
}

.iconBadgeMilitary {
  border-color: rgb(161 171 130 / 0.62);
  background: linear-gradient(180deg, rgb(123 133 96 / 0.36), rgb(62 68 49 / 0.62));
  box-shadow:
    inset 0 1px 0 rgb(235 226 204 / 0.24),
    0 6px 18px rgb(0 0 0 / 0.34);
}

.highlightTitle {
  color: rgb(230 218 200);
  letter-spacing: 0.03em;
  text-shadow: 0 1px 0 rgb(0 0 0 / 0.2);
}

.highlightText {
  color: rgb(190 175 158);
}

.iconHighlight {
  color: rgb(195 155 110);
}

.militaryTitle {
  color: rgb(228 223 205);
  text-shadow: 0 1px 0 rgb(0 0 0 / 0.2);
}

.militaryText {
  color: rgb(186 180 160);
}

.iconMilitary {
  color: rgb(198 190 166);
}

.contentLayer {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-rows: auto auto auto auto 1fr;
  min-height: 100%;
  row-gap: 0;
  padding-bottom: 1.5rem;
}

.cardTag {
  margin: 0 0 0.5rem;
  display: inline-flex;
  justify-content: center;
  text-align: center;
  padding: 0;
  font-size: 0.7rem;
  line-height: 1.1;
}

.cardTitle {
  margin: 0 0 0.65rem;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.cardDescription {
  margin: 0;
  justify-self: center;
  text-align: center;
}

.iconDock {
  display: flex;
  justify-content: center;
  margin: 0.6rem 0 0.8rem;
  transition: transform 380ms cubic-bezier(0.22, 1, 0.36, 1);
}

.serviceCard:hover .iconDock {
  transform: translateY(-2px);
}

  .serviceCard:hover .iconBadge {
  transform: scale(1.06);
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.14),
    0 10px 20px rgb(0 0 0 / 0.22);
}

@media (min-width: 1024px) {
  .rowDivider {
    display: block;
    height: 1px;
    width: min(100%, 60rem);
    margin-inline: auto;
    background:
      linear-gradient(90deg, rgb(214 155 132 / 0) 0%, rgb(214 155 132 / 0.58) 28%, rgb(160 171 122 / 0.58) 72%, rgb(160 171 122 / 0) 100%);
    box-shadow: 0 0 24px rgb(214 155 132 / 0.2);
  }
}

/* Samotna 3. karta w dolnym rzędzie (2-kol sm) — pełna szerokość */
@media (min-width: 640px) and (max-width: 767px) {
  .serviceCard:last-child:nth-child(odd) {
    grid-column: 1 / -1;
  }
}

@media (prefers-reduced-motion: reduce) {
  .serviceCard,
  .serviceCard::before,
  .cardTopLine,
  .iconBadge,
  .iconDock {
    transition: none;
  }
}
